version: "2"
sql:
  - engine: "postgresql"
    queries: [
      "sql/active_servers.sql",
      "sql/channel.sql",
      "sql/flag_mappings.sql",
      "sql/flags.sql",
      "sql/guild.sql",
      "sql/player_count_notification.sql",
      "sql/prev_active_servers.sql",
      "sql/prev_mentions.sql",
      "sql/tracking.sql"
    ]
    schema: [
      "migrations/001_schema.sql",
    ]
    gen:
      go:
        sql_package: "pgx/v5"
        package: "sqlc"
        out: "sqlc"
        overrides: # test why the builtin postgresql types are not mapped correctly
          - db_type: "scorekind"
            go_type:
              type: "string"
          - db_type: "TIMESTAMPTZ"
            go_type:
              import: "time"
              type: "Time"
          - db_type: "TIMESTAMP"
            go_type:
              import: "time"
              type: "Time"
          - db_type: "INTEGER"
            go_type:
              type: "int"
        emit_db_tags: true
        emit_prepared_queries: true
        emit_empty_slices: true
        emit_enum_valid_method: true
        emit_pointers_for_null_types: true
        emit_all_enum_values: true
